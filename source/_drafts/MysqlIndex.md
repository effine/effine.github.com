title: Mysql索引
title: Mysql索引
date: 2015-07-28 20:37:54
categories: 
tags:
  - database
  - mysql
---

无法使用索引场景：

- where语句使用了不等号(!=, not in)
- 查询条件使用mysql函数(不应该在列上进行运算)
  如：where substring(name,1,3) = “xxxx”

- 列的值包含null,则该列索引无效(创建表示不能让字段默认为null)

- 在JOIN操作中（需要从多个数据表提取数据时），MYSQL只有在主键和外键的数据类型相同时才能使用索引，否则即使建立了索引也不会使用
- 如果WHERE子句的查询条件里使用了比较操作符LIKE和REGEXP，MYSQL只有在搜索模板的第一个字符不是通配符的情况下才能使用索引。比如说，如果查询条件是LIKE 'abc%',MYSQL将使用索引；如果条件是LIKE '%abc'，MYSQL将不使用索引。

- .在ORDER BY操作中，MYSQL只有在排序条件不是一个查询条件表达式的情况下才使用索引。尽管如此，在涉及多个数据表的查询里，即使有索引可用，那些索引在加快ORDER BY操作方面也没什么作用。

- 如果某个数据列里包含着许多重复的值，就算为它建立了索引也不会有很好的效果。比如说，如果某个数据列里包含了净是些诸如“0/1”或“Y/N”等值，就没有必要为它创建一个索引。

- .如果条件中有or(并且其中有or的条件是不带索引的)，即使其中有条件带索引也不会使用(这也是为什么尽量少用or的原因)。注意：要想使用or，又想让索引生效，只能将or条件中的每个列都加上索引


- 如果列类型是字符串，那一定要在条件中将数据使用引号引用起来,否则不使用索引

- 对于多列索引，不是使用的第一部分，则不会使用索引

- 一次sql查询只能使用到一个索引

- 更新较频繁的字段不适合做索引

- 大文本不适合做索引，可以选取文本的前十位来做索引(设置索引的长度即可实现)

- 索引遵循“最左原则”(组合索引的第一个字段必须出现在查询组句中，这个索引才会被用到。)



- 如果mysql估计使用全表扫描要比使用索引快,则不使用索引

使用EXPLAIN + sql语句查看sql语句执行过程中是否使用索引(keyd)

show status like 'Handler_read%';
注意:handler_read_key:这个值越高越好，越高表示使用索引查询到的次数 handler_read_rnd_next:这个值越高，说明查询低效