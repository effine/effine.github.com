title: Vi Commands
date: 2015-01-10 22:36:25
categories: linux
tags: [linux,tools]
---
vi编辑器在Linux下使用频率不言而喻，接下来简单叙述。Vi编辑器存在命令、编辑、末行三种模式(模式的分类不尽相同,仅此以本人理解的叙述)；

vi filename -- 使用vi编辑器对文件filename进行编辑,Enter进入命令模式（所有的命令必须在英文状态输入才有效）

<!-- more -->
1. 命令模式(一般模式): 用户处于任何模式，都可以按 ESC 键进入命令模式；我们使用 "vi" 命令启动编辑器也是进入命令模式；该模式作为编辑模式与末行模式互相切换的桥梁,编辑模式与末行模式不能直接互相切换；该模式主要使用方向键位置进行文字的编辑，常用命令：
	
	<p> - - 移动光标 - -
	- ↑↓← → --上下左右方向键移动光标
	- pagedown/pageup -- 翻页上一页/下一页
	- 0(数字0)/$ -- 光标移至所在行 行首/行尾
	- G/nG/gg -- 移动光标至文件最后一行/n行/第一行(相当于1G)行首
	- H/M/L -- 光标移至屏幕内容顶部/中央/尾部
	- :lineNo -- 光标跳转到指定行号（lineNo）行首

	<p> - - 删除/复制/粘贴 - -
	- x/X -- x为光标向后删除一个字符（相当于del键），X为光标向前删除一个字符（相当于Backspace键）
	- dd/ndd -- 删除光标所在行 / 从光标行开始，向下删除n行
	- yy/nyy -- 复制光标所在的那一行 / 复制光标所在行的向下n行
	- p/P（大写） -- 粘贴复制的内容到光标所在行的下一行 / 上一行
	- u -- 复原前一个操作、
	- ctrl + r -- 重做上一个操作
	- 小数点"." -- 重复前一个动作


2. 编辑模式(文本输入模式): 该模式是对文件进行编辑操作，进入该模式命令窗口底部显示"-- INSERT --"标志; 命令模式切换到编辑模式方式：

	<p> - - 进入编辑模式并进行相应操作 - -
	- i/I(insert) -- 输入即在光标 所在位置之前 / 在当前所在行的一个非空格符处开始插入插入
	- a/A(append) -- 输入即在光标 所在位置之后 / 所在行行尾追加
	- o/O(open) -- 光标所在行前 / 后插入一新行
	- r/R(replace) -- 替换光标所在的那一个字符 / 会一直替换光标所在的字符,直到按下esc 键为止

3. 末行模式(指令列命令模式): 即可将光标移动到最下面一行，在该模式下，您可以搜索数据，而且读取，存盘，大量删除字符，离开vi，显示行号等操作
	
	<p> - - 保存/退出vi - -
	- :w -- 保存文件但不退出vi编辑器
	- :w filename -- 将修改的文件另存为filename,不退出vi
	- :w! -- 强制保存，不退出vi
	- :q -- 退出vi,不保存修改
	- :q! -- 强制退出vi,不保存修改
	- :wq -- 保存并退出vi 
	- :wq! -- 强制保存并退出vi
	- ZZ -- 保存并退出
	- :e! -- 放弃所有修改，从上次保存文件处开始再次编辑
	- :set nu/nonu -- 让vi编辑器显示 / 隐藏行号

	<p> - - 搜索与特换 - -
	- /keyword -- 从光标开始，向下搜索关键字keyword字符串
		- 按'n'向下定位下一处匹配的关键字
		- 按"N"向上定位下一处匹配的关键字
	- ?keyword -- 从光标开始，向上搜索关键字
	- :n1,n2s/word1/word2/g -- n1与n2为数字.在第n1与n2行之间寻找word1这个字符串,并将该字符串替换为word2
		- eg: ":1、$s/word1/word2/g",从第一行到最后一行寻找word1字符串，并将该字符串替换为word2
		- eg: ":1、$s/word1/word2/gc",从第一行到最后一行寻找word1字符串，并将该字符串替换为word2。并且在替换之前显示提示符给用户确认（conform）是否需要替换